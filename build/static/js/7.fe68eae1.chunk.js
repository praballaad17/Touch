(this["webpackJsonpclient-new"]=this["webpackJsonpclient-new"]||[]).push([[7],{118:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(122),i=n.n(c),a=n(7);function s(){return Object(a.jsx)(i.a,{type:"TailSpin",color:"#00000059",height:70,width:70,className:"flex justify-center mt-12"})}},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(9),i=n(124),a=n(0),s=["count","wrapper","className","containerClassName","containerTestId","circle","style"],r=a.createContext({});function o(e){var t,n,o=e.count,l=void 0===o?1:o,u=e.wrapper,d=e.className,j=e.containerClassName,b=e.containerTestId,m=e.circle,h=void 0!==m&&m,f=e.style,O=Object(i.a)(e,s),x=a.useContext(r),p=Object(c.a)(Object(c.a)(Object(c.a)({},x),O),{},{circle:h}),v=Object(c.a)(Object(c.a)({},f),function(e){var t=e.baseColor,n=e.highlightColor,c=e.width,i=e.height,a=e.borderRadius,s=e.circle,r=e.direction,o=e.duration,l=e.enableAnimation,u=void 0===l||l,d={};return"rtl"===r&&(d["--animation-direction"]="reverse"),"number"===typeof o&&(d["--animation-duration"]="".concat(o,"s")),u||(d["--pseudo-element-display"]="none"),"string"!==typeof c&&"number"!==typeof c||(d.width=c),"string"!==typeof i&&"number"!==typeof i||(d.height=i),"string"!==typeof a&&"number"!==typeof a||(d.borderRadius=a),s&&(d.borderRadius="50%"),"undefined"!==typeof t&&(d["--base-color"]=t),"undefined"!==typeof n&&(d["--highlight-color"]=n),d}(p)),g="react-loading-skeleton";d&&(g+=" ".concat(d));for(var _=null!==(t=p.inline)&&void 0!==t&&t,N=[],y=0;y<l;y++){var k=a.createElement("span",{className:g,style:v,key:y},"\u200c");_?N.push(k):N.push(a.createElement(a.Fragment,{key:y},k,a.createElement("br",null)))}return a.createElement("span",{className:j,"data-testid":b,"aria-live":"polite","aria-busy":null===(n=p.enableAnimation)||void 0===n||n},u?N.map((function(e,t){return a.createElement(u,{key:t},e)})):N)}},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var c=n(1),i=n.n(c),a=n(5),s=n(6),r=n(0),o=n(115),l=n(114),u=n(54),d=n(8),j=n(56),b=n.n(j),m=n(14),h=n(61),f=n(60),O=n(59),x=n(55),p=n(7);function v(e){var t=e.open,n=e.content,c=e.onClose,s=Object(x.b)().user,r=Object(O.b)(),o=r.timeline,l=r.setTimeline,j=Object(m.h)().pathname;if(!t)return null;var v=function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,t=0;t<n.fileNumber;t++)Object(f.a)("/file/".concat(null===n||void 0===n?void 0:n.author,"/").concat(n._id,"/").concat(null===n||void 0===n?void 0:n.fileNames[t]));return e.next=4,Object(h.a)(n._id);case 4:"/home"==j&&(l(o.filter((function(e){return e._id!=n._id}))),c()),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Error while deleting the Post, generally check your internet"),console.log(e.t0,n),"/"==j&&l((function(e){return[].concat(Object(d.a)(e),[n])}));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return b.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"modal-layout",onClick:c}),Object(p.jsx)("div",{className:"modal-box",children:Object(p.jsxs)("ul",{className:"modal-box__list",children:[Object(p.jsx)("li",{className:"modal-box__item",children:Object(p.jsx)(u.b,{className:"u-text-decor-none",target:"_blanck",to:"/user/".concat(null===n||void 0===n?void 0:n.author),children:"Share"})}),n.author==s.username&&Object(p.jsx)("li",{className:"modal-box__item u-text-red-bold",onClick:v,children:"Delete Post"}),n.author!=s.username&&Object(p.jsx)("li",{className:"modal-box__item u-text-red-bold",onClick:function(){localStorage.setItem("dontLikePost",JSON.stringify({postId:n._id,author:n.author})),c()},children:"I don't link this Post"}),Object(p.jsx)("li",{className:"modal-box__item",onClick:c,children:"Cancel"})]})})]}),document.getElementById("modal"))}function g(e){var t=e.user,n=e.content,c=(e.setProfile,e.photosCollection,Object(r.useState)(!1)),i=Object(s.a)(c,2),a=i[0],d=i[1];return Object(p.jsxs)("div",{className:"post__header",children:[Object(p.jsxs)(u.b,{to:"/user/".concat(null===t||void 0===t?void 0:t.username),className:"post__header-info",children:[Object(p.jsx)("div",{className:"u-bold post__header-name",children:null===t||void 0===t?void 0:t.fullName}),Object(p.jsxs)("p",{className:"post__header-username",children:["@",null===t||void 0===t?void 0:t.username]})]}),Object(p.jsx)("div",{className:"u-icon",onClick:function(){return d(!0)},children:Object(p.jsx)(l.a,{icon:o.g})}),a&&Object(p.jsx)(v,{content:n,open:a,onClose:function(){return d(!1)}})]})}function _(e){var t=e.fileNumber,n=(e.caption,e.postId),c=e.files,i=e.author,a=Object(r.useState)(0),o=Object(s.a)(a,2),l=(o[0],o[1],Object(r.useState)(!1)),d=Object(s.a)(l,2);d[0],d[1];return Object(p.jsx)("div",{className:"image-slider",children:Object(p.jsxs)("div",{className:"image-slider__box",children:[Object(p.jsx)("div",{className:"".concat(2==t||3==t||4==t?"image-slider__box-left-".concat(t):"image-slider__box-left"),children:c.map((function(e,c){return Object(p.jsx)(p.Fragment,{children:c<2?Object(p.jsx)(u.b,{to:"/".concat(i,"/").concat(n,"/").concat(c+1),className:"".concat(2==t||4==t||3==t?"image-slider__box-img-".concat(t):"image-slider__box-img"),children:Object(p.jsx)("img",{className:"image-slider__box-img-nor",src:e,alt:"files"})}):Object(p.jsx)(p.Fragment,{})})}))}),t>2?Object(p.jsx)("div",{className:"".concat(4==t?"image-slider__box-right-2":"image-slider__box-right-3"),children:c.map((function(e,c){return Object(p.jsx)(p.Fragment,{children:c>1?Object(p.jsx)(u.b,{to:"/".concat(i,"/").concat(n,"/").concat(c+1),children:Object(p.jsx)("img",{className:"".concat(4==t?"image-slider__box-img-".concat(t):"image-slider__box-img-r3"),src:e,alt:"files"})}):Object(p.jsx)(p.Fragment,{})})}))}):Object(p.jsx)(p.Fragment,{})]})})}function N(e){var t=e.content,n=e.postref,c=e.setProfile,o=e.photosCollection,l=(Object(r.useRef)(null),Object(r.useState)()),d=Object(s.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(),h=Object(s.a)(m,2),f=h[0],O=h[1],v=Object(x.b)(),N=v.getProfileImg,y=v.getUser,k=t.caption,w=t.author,C=t.fileNumber,I=t._id,E=t.files;return Object(r.useEffect)((function(){function e(){return(e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(w);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w]),Object(r.useEffect)((function(){function e(){return(e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(w);case 2:t=e.sent,b(null===t||void 0===t?void 0:t.displayImg.profileImg);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(p.jsxs)("div",{ref:n,className:"post",children:[Object(p.jsx)(u.b,{to:"/user/".concat(null===f||void 0===f?void 0:f.username),className:"post__side",children:Object(p.jsx)("img",{className:"post__pimg",src:j,alt:"profile"})}),Object(p.jsxs)("div",{className:"post__main",children:[Object(p.jsx)(g,{content:t,user:f,setProfile:c,photosCollection:o}),Object(p.jsx)("div",{className:"post__text",children:k}),Object(p.jsx)(_,{files:E,author:w,fileNumber:C,postId:I})]})]})}},151:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var c=n(1),i=n.n(c),a=n(5),s=n(6),r=n(115),o=n(14),l=n(114),u=n(0),d=n(121),j=n(125),b=n(123),m=n(42),h=n(118),f=n(116),O=n(59),x=n(55),p=n(128),v=n(129),g=n(7);function _(e){var t,n=e.setShow,c=e.user;Object(u.useEffect)((function(){document.title="Home | Touch"}),[]);var _=Object(x.b)().user,N=Object(O.b)(),y=N.getTimeline,k=N.timeline,w=N.loading,C=N.hasMore,I=N.pageNumber,E=N.setPageNumber,P=N.recievedPosts,S=N.addRecivedToTimeline,F=Object(u.useState)(!1),T=Object(s.a)(F,2),R=T[0],J=T[1];Object(u.useEffect)(Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in effect"),e.next=3,y();case 3:case"end":return e.stop()}}),e)}))),[I]);var A=Object(u.useRef)(),H=Object(u.useCallback)((function(e){w||(A.current&&A.current.disconnect(),A.current=new IntersectionObserver((function(e){console.log(C),e[0].isIntersecting&&C&&E((function(e){return e+1}))})),e&&A.current.observe(e))}),[w,C]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(o.d,{children:Object(g.jsx)(p.a,{path:m.b,user:c,children:Object(g.jsx)(v.a,{user:c})})}),Object(g.jsxs)("div",{className:"timeline",children:[Object(g.jsxs)("div",{className:"timeline__head",children:[Object(g.jsx)("div",{className:"timeline__head--profile",onClick:function(){return n(!0)},children:Object(g.jsx)("img",{className:"link-list--proImg--small",src:null===_||void 0===_||null===(t=_.displayImg)||void 0===t?void 0:t.profileImg,onError:function(e){e.target.src=f.a},alt:null===_||void 0===_?void 0:_.username})}),!R&&Object(g.jsx)("h3",{className:"heading-main",children:"Home"}),R&&Object(g.jsxs)("div",{className:"timeline__head--search",children:[Object(g.jsx)(l.a,{icon:r.a,onClick:function(){J(!1)}}),Object(g.jsx)(j.a,{})]}),Object(g.jsx)("div",{className:"timeline__head--searchbtn",children:Object(g.jsx)(l.a,{icon:r.r,onClick:function(){return J(!0)}})})]}),P.length?Object(g.jsxs)("div",{className:"timeline__unseen",onClick:S,children:[P.length," New Posts"]}):Object(g.jsx)(g.Fragment,{}),!(null===k||void 0===k?void 0:k.length)&&w?Object(g.jsx)(d.a,{count:2,width:640,height:500}):null===k||void 0===k?void 0:k.map((function(e,t){return(null===k||void 0===k?void 0:k.length)===t+1?Object(g.jsx)(b.a,{postref:H,content:e},null===e||void 0===e?void 0:e._id):Object(g.jsx)(b.a,{content:e},t)})),Object(g.jsx)("div",{className:"timeline__loading",children:w&&Object(g.jsx)(h.a,{})})]})]})}}}]);
//# sourceMappingURL=7.fe68eae1.chunk.js.map