(this["webpackJsonpclient-new"]=this["webpackJsonpclient-new"]||[]).push([[9],{118:function(e,c,s){"use strict";s.d(c,"a",(function(){return o}));var t=s(122),n=s.n(t),a=s(7);function o(){return Object(a.jsx)(n.a,{type:"TailSpin",color:"#00000059",height:70,width:70,className:"flex justify-center mt-12"})}},155:function(e,c,s){"use strict";s.r(c),s.d(c,"default",(function(){return N}));var t=s(1),n=s.n(t),a=s(5),o=s(0),i=s(57),l=s(6),r=s(115),j=s(114),d=s(116),b=s(118),m=s(7);function x(){var e=Object(i.b)(),c=e.selectedConversation,s=e.sendMessage,t=e.setSelectedConversationGroupId,n=Object(o.useState)(""),a=Object(l.a)(n,2),x=a[0],v=a[1],u=Object(o.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]),O=function(){v(""),s(c.membersId,x,c._id)};return c?Object(m.jsxs)("div",{className:"convbox",children:[Object(m.jsxs)("div",{className:"convbox__head",children:[Object(m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(m.jsx)("div",{className:"u-icon convbox__head-back",children:Object(m.jsx)(j.a,{icon:r.a,onClick:function(){return t()}})}),Object(m.jsx)("img",{className:"convbox__head-img",src:d.a,alt:"profile-img"})]}),Object(m.jsx)("div",{className:"convbox__head-title",children:c._id}),Object(m.jsx)("div",{className:"u-icon",children:Object(m.jsx)(j.a,{icon:r.l})})]}),Object(m.jsx)("div",{className:"convbox__box",children:c.messages.map((function(e,s){var t=c.messages.length-1===s;return Object(m.jsxs)("div",{ref:t?u:null,className:"convbox__box-message ".concat(e.fromMe?"convbox__box-message-me":"convbox__box-message-other"),children:[Object(m.jsxs)("div",{className:"convbox__box-message-textbox ".concat(e.fromMe?"convbox__box-message-textbox-me":"convbox__box-message-textbox-other"),children:[Object(m.jsx)("div",{className:"u-icon convbox__box-message-textbox-icon",children:Object(m.jsx)(j.a,{icon:r.f})}),Object(m.jsx)("div",{className:"convbox__box-message-text ".concat(e.fromMe?"convbox__box-message-text-me":"convbox__box-message-text-other"),children:e.text})]}),Object(m.jsx)("div",{className:"convbox__box-message-details",children:e.fromMe?"You":e.senderName})]},s)}))}),Object(m.jsxs)("div",{className:"convbox__form",children:[Object(m.jsxs)("label",{className:"u-icon",children:[Object(m.jsx)(j.a,{icon:r.k}),Object(m.jsx)("input",{type:"file",style:{opacity:0,position:"absolute",left:"-99999px"}})]}),Object(m.jsx)("input",{className:"convbox__form-input",type:"text",onKeyUp:function(e){"Enter"===e.key&&O()},onInput:function(e){e.preventDefault();var c=e.target.value;v(c)},value:x,placeholder:"Start a New Message"}),Object(m.jsx)("div",{className:"u-icon",onClick:O,children:Object(m.jsx)(j.a,{icon:r.o})})]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"convbox__notselected",children:Object(m.jsxs)("div",{className:"convbox__notselected-box",children:[Object(m.jsx)("div",{className:"convbox__notselected-head",children:"You don\u2019t have a message selected"}),Object(m.jsx)("div",{className:"convbox__notselected-message",children:"Choose one from your existing messages, or start a new one."}),Object(m.jsx)("button",{className:"btn btn--tertiary",children:"New Messages"})]})}),Object(m.jsx)("div",{className:"convbox__notselected-mob",children:Object(m.jsx)(b.a,{})})]})}var v=s(8),u=s(56),O=s.n(u),h=s(126);function _(e){var c=e.onClose,s=Object(o.useState)([]),t=Object(l.a)(s,2),n=t[0],a=t[1],b=Object(o.useState)([]),x=Object(l.a)(b,2),u=x[0],_=x[1],g=Object(o.useState)(),N=Object(l.a)(g,2),f=N[0],p=N[1],w=Object(o.useState)(1),C=Object(l.a)(w,2),k=C[0],y=C[1],S=Object(i.b)().createGroup,I=Object(h.a)(f,k),M=I.result,F=I.loading;return O.a.createPortal(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"modal-layout",onClick:c}),Object(m.jsxs)("div",{className:"modal-newconv",children:[Object(m.jsxs)("div",{className:"modal-newconv__heading",children:[Object(m.jsx)("div",{className:"u-icon",onClick:c,children:Object(m.jsx)(j.a,{icon:r.t})}),Object(m.jsx)("div",{className:"modal-newconv__heading-main",children:"New Messages"}),Object(m.jsx)("button",{disabled:!n.length,className:"btn btn--grey ".concat(!n.length&&"u-opacity-50"),onClick:function(e){S(u,n),c()},children:"Create"})]}),Object(m.jsxs)("div",{className:"modal-newconv__search",children:[Object(m.jsxs)("div",{className:"modal-newconv__search-box",children:[Object(m.jsx)(j.a,{icon:r.r}),Object(m.jsx)("input",{className:"modal-newconv__search-input",type:"text",onInput:function(e){e.preventDefault(),p(e.target.value),y(1)},placeholder:"Search People"}),F&&Object(m.jsx)("img",{className:"search__loading",src:d.b,alt:"loading"})]}),n.length?Object(m.jsx)("div",{className:"modal-newconv__search-selected",children:n.map((function(e){return Object(m.jsxs)("div",{className:"modal-newconv__search-selected-user",onClick:function(){return function(e){a(n.filter((function(c){return c.username!==e.username}))),a(u.filter((function(c){return c!==e._id})))}(e)},children:[Object(m.jsx)("img",{className:"modal-newconv__search-selected-img",src:e.profileImg.length?e.profileImg:d.a,alt:"profile-img"}),Object(m.jsx)("span",{children:e.fullName}),Object(m.jsx)(j.a,{className:"modal-newconv__search-selected-icon",icon:r.t})]})}))}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsx)("div",{className:"modal-newconv__result",children:M.map((function(e){return Object(m.jsxs)("div",{className:"modal-newconv__result-user",onClick:function(){return function(e){a((function(c){return[].concat(Object(v.a)(c),[e])})),_((function(c){return[].concat(Object(v.a)(c),[e._id])}))}(e)},children:[Object(m.jsx)("img",{className:"modal-newconv__result-user-img",src:e.profileImg.length?e.profileImg:d.a,loading:"prfileimg"}),Object(m.jsxs)("div",{className:"modal-newconv__result-user-info",children:[Object(m.jsx)("span",{children:e.fullName}),Object(m.jsxs)("span",{className:"modal-newconv__result-user-info-username",children:["@",e.username]})]})]})}))})]})]}),document.getElementById("modal"))}function g(){var e=Object(o.useState)(!1),c=Object(l.a)(e,2),s=c[0],t=c[1],n=Object(o.useState)(!1),a=Object(l.a)(n,2),x=a[0],v=a[1],u=Object(o.useState)(),O=Object(l.a)(u,2),h=O[0],g=O[1],N=[],f=Object(i.b)(),p=f.conversations,w=f.setSelectedConversationGroupId,C=f.loading;return Object(m.jsxs)("div",{className:"convlist",children:[Object(m.jsxs)("div",{className:"convlist__head",children:[Object(m.jsx)("div",{className:"heading-black",children:"Messages"}),Object(m.jsxs)("div",{className:"convlist__head-right",children:[Object(m.jsx)("div",{className:"u-icon",children:Object(m.jsx)(j.a,{icon:r.e})}),Object(m.jsx)("div",{className:"u-icon",onClick:function(){return v(!0)},children:Object(m.jsx)(j.a,{icon:r.h})})]})]}),C?Object(m.jsx)("div",{className:"convlist__loading",children:Object(m.jsx)(b.a,{})}):Object(m.jsxs)(m.Fragment,{children:[p.length?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"convlist__search",children:[s&&Object(m.jsx)("div",{className:"u-icon",onClick:function(){return t(!1)},children:Object(m.jsx)(j.a,{icon:r.a})}),Object(m.jsxs)("div",{className:"convlist__search-box",children:[Object(m.jsxs)("div",{className:"convlist__search-inputbox",children:[Object(m.jsx)(j.a,{icon:r.r}),Object(m.jsx)("input",{className:"convlist__search-input",onInput:function(e){g(e.target.value)},type:"text",onClick:function(){t(!0)},placeholder:"Search for People or Group"})]}),h&&!C&&Object(m.jsx)("div",{className:"u-icon",onClick:function(){g(""),document.querySelector(".convlist__search-input").value=""},children:Object(m.jsx)(j.a,{icon:r.t})}),C&&Object(m.jsx)("img",{className:"search__loading",src:d.b,alt:"loading"})]})]})}):Object(m.jsxs)("div",{className:"convlist__nolist",children:[Object(m.jsx)("div",{className:"convlist__nolist-head",children:"Send a message, get a message"}),Object(m.jsx)("div",{className:"convlist__nolist-message",children:"Direct Messages are private conversations between you and other people on Touch. Share Touch, media, and more!"}),Object(m.jsx)("button",{className:"btn btn--tertiary",onClick:function(){return v(!0)},children:"Start Conversation"})]}),s&&Object(m.jsx)("div",{className:"convlist__result",children:(null===N||void 0===N?void 0:N.length)?Object(m.jsx)("div",{}):Object(m.jsx)("div",{className:"convlist__result-noresult",children:"Try searching for people or groups"})}),!s&&Object(m.jsx)("div",{className:"convlist__list",children:p.map((function(e){var c;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"convlist__list-conv",onClick:function(){return w(e._id)},children:[Object(m.jsx)("img",{className:"convlist__list-conv-img",src:d.a,alt:"profile-img"}),Object(m.jsxs)("div",{className:"convlist__list-conv__cont",children:[Object(m.jsx)("div",{className:"convlist__list-conv__mem",children:e.members.map((function(e){return Object(m.jsxs)("div",{children:["\xa0",e.fullName,","]})}))}),Object(m.jsx)("div",{children:null===(c=e.messages[e.messages.length-1])||void 0===c?void 0:c.text})]})]})})}))}),Object(m.jsxs)("div",{className:"convlist__newconv",onClick:function(){return v(!0)},children:[" ",Object(m.jsx)(j.a,{icon:r.h})]})]}),x&&Object(m.jsx)(_,{onClose:function(){return v(!1)}})]})}function N(){var e=Object(i.b)().setUnseen;Object(o.useEffect)((function(){document.title="Messages | Touch",e(0)}),[]);var c=Object(i.b)(),s=c.retriveGroups,t=c.selectedConversationGroupId;return Object(o.useEffect)(Object(a.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:case"end":return e.stop()}}),e)}))),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"message",children:[Object(m.jsx)("div",{className:"message__convlist",children:Object(m.jsx)(g,{})}),Object(m.jsx)("div",{className:"message__convbox",children:Object(m.jsx)(x,{})})]}),Object(m.jsx)("div",{className:"message-mob",children:t?Object(m.jsx)("div",{className:"message-mob__convbox",children:Object(m.jsx)(x,{})}):Object(m.jsx)("div",{className:"message-mob__convlist",children:Object(m.jsx)(g,{})})})]})}}}]);
//# sourceMappingURL=9.743872c9.chunk.js.map