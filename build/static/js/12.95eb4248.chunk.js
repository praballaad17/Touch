(this["webpackJsonpclient-new"]=this["webpackJsonpclient-new"]||[]).push([[12],{152:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));var s,c=n(1),a=n.n(c),r=n(8),o=n(5),i=n(6),l=n(0),u=n(14),d=n(115),b=n(114),j=n(71),p=n.n(j),m=new Uint8Array(16);function f(){if(!s&&!(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(m)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var O=function(e){return"string"===typeof e&&g.test(e)},h=[],v=0;v<256;++v)h.push((v+256).toString(16).substr(1));var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!O(n))throw TypeError("Stringified UUID is invalid");return n};var y=function(e,t,n){var s=(e=e||{}).random||(e.rng||f)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(var c=0;c<16;++c)t[n+c]=s[c];return t}return x(s)},_=n(7);function w(e){var t=e.files,n=e.onChange;return t.length?Object(_.jsx)("div",{className:"file-privew",children:t.map((function(e,t){return Object(_.jsxs)("div",{className:"file-privew__item",children:[Object(_.jsx)(b.a,{icon:d.w,className:"file-privew__close",onClick:function(){return function(e){n(e)}(e)}}),Object(_.jsx)("img",{src:e,alt:"upload-img"})]},t)}))}):null}n(42),n(61);var N=n(56),E=n.n(N);function k(e){var t=e.open,n=(e.onClose,e.progress);return Object(l.useEffect)((function(){document.querySelector(".progress__bar").style.width=n}),[n]),t?E.a.createPortal(Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"modal-layout"}),Object(_.jsxs)("div",{className:"modal-box",children:[Object(_.jsx)("div",{className:"modal-box__heading heading-black u-center-text",children:"Progress"}),Object(_.jsxs)("ul",{className:"modal-box__list",children:[Object(_.jsx)("li",{className:"modal-box__item",children:n}),Object(_.jsx)("li",{children:Object(_.jsxs)("div",{className:"progress",children:[Object(_.jsx)("div",{className:"progress__bar"}),Object(_.jsx)("div",{className:"progress__base"})]})})]})]})]}),document.getElementById("modal")):null}var C=n(60),S=n(55),I=n(59),B=n(62);function L(){Object(l.useEffect)((function(){document.title="New Post | Touch",Q(y())}),[]);var e=Object(S.b)().user,t=Object(I.b)(),n=(t.setTimeline,t.postFeed),s=(Object(B.b)().addToAllProfilePost,Object(l.useState)([])),c=Object(i.a)(s,2),j=c[0],m=c[1],f=Object(l.useState)(!1),g=Object(i.a)(f,2),O=(g[0],g[1]),h=Object(l.useState)([]),v=Object(i.a)(h,2),x=v[0],N=v[1],E=Object(l.useState)([]),L=Object(i.a)(E,2),P=L[0],R=L[1],U=Object(l.useState)(""),V=Object(i.a)(U,2),F=V[0],T=V[1],J=Object(l.useState)(""),z=Object(i.a)(J,2),A=z[0],q=(z[1],Object(l.useState)(!1)),D=Object(i.a)(q,2),G=D[0],$=D[1],H=Object(l.useState)(),K=Object(i.a)(H,2),M=K[0],Q=K[1],W=(Object(u.g)(),function(e){return new Promise((function(t){p.a.imageFileResizer(e,640,480,"JPEG",100,0,(function(e){return t(e)}),"file")}))}),X=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files.length){e.next=2;break}return e.abrupt("return");case 2:if(4!==x.length){e.next=4;break}return e.abrupt("return");case 4:return n=t.target.files[0],e.next=7,W(n);case 7:s=e.sent,m((function(e){return[].concat(Object(r.a)(e),[URL.createObjectURL(s)])})),c=y(),N((function(e){return[].concat(Object(r.a)(e),[s])})),R((function(e){return[].concat(Object(r.a)(e),[c])}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var t=Object(o.a)(a.a.mark((function t(){var s,c,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],O(!0),$(!0),c=0;case 4:if(!(c<x.length)){t.next=13;break}return console.log("in loop"),t.next=8,Object(C.d)(x[c],"/file/".concat(null===e||void 0===e?void 0:e.username,"/").concat(M,"/").concat(P[c]));case 8:r=t.sent,s.push(r);case 10:c++,t.next=4;break;case 13:try{n(s,P,M,F),O(!1),$(!1)}catch(a){console.log(a.response)}case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return console.log(j),Object(l.useEffect)((function(){j.length>0?(document.getElementById("post_submit").classList.remove("btn--grey"),document.getElementById("post_submit").classList.add("btn--tertiary")):0===j.length&&(console.log("zero"),document.getElementById("post_submit").classList.remove("btn--tertiary"),document.getElementById("post_submit").classList.add("btn--grey"))}),[j]),Object(l.useEffect)((function(){4===j.length&&(console.log("diabled"),document.getElementById("addpost").classList.add("newpost__media-disabled"),document.getElementById("addpost-input").disabled=!0),4!==j.length&&(document.getElementById("addpost").classList.remove("newpost__media-disabled"),document.getElementById("addpost-input").disabled=!1)}),[j]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"newpost__head",children:[Object(_.jsx)("h3",{className:"heading-tertiary",children:"New Post"}),Object(_.jsx)("div",{children:Object(_.jsx)("button",{id:"post_submit",className:"btn btn--grey",onClick:Y,children:"Post"})})]}),Object(_.jsxs)("div",{className:"newpost__main",children:[Object(_.jsx)("div",{children:Object(_.jsx)(w,{files:j,onChange:function(e){var t=j.indexOf(e);m(j.filter((function(t){return t!==e}))),x.splice(t,1),P.splice(t,1)}})}),Object(_.jsx)("textarea",{className:"newpost__input-text",placeholder:"compose new post...",onInput:function(e){T(e.target.value)}}),Object(_.jsxs)("label",{id:"addpost",className:"newpost__media",children:[Object(_.jsx)(b.a,{icon:d.k}),Object(_.jsx)("input",{id:"addpost-input",type:"file",style:{opacity:0,position:"absolute",left:"-99999px"},onChange:X})]})]}),G&&Object(_.jsx)(k,{open:G,progress:A,onClose:function(){return $(!1)}})]})}}}]);
//# sourceMappingURL=12.95eb4248.chunk.js.map