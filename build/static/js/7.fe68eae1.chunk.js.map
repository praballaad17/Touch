{"version":3,"sources":["components/loader.js","../node_modules/react-loading-skeleton/dist/index.mjs","components/post/postModal.js","components/post/header.js","components/post/image.js","components/post/index.js","components/timeline.js"],"names":["ReactLoader","type","color","height","width","className","SkeletonThemeContext","React","createContext","Skeleton","_a","_b","count","Wrapper","wrapper","customClassName","containerClassName","containerTestId","circle","styleProp","style","propsStyleOptions","contextStyleOptions","useContext","styleOptions","baseColor","highlightColor","borderRadius","direction","duration","enableAnimation","styleOptionsToCssProperties","inline","elements","i","skeletonSpan","createElement","key","push","Fragment","map","el","PostModal","open","content","onClose","loggedInUser","useUser","user","usePost","timeline","setTimeline","pathname","useLocation","deletePost","a","fileNumber","deleteImgInStorage","author","_id","fileNames","deletePostById","filter","item","alert","console","log","prevPost","ReactDom","createPortal","onClick","target","to","username","localStorage","setItem","JSON","stringify","postId","document","getElementById","Header","setProfile","photosCollection","useState","isModal","setModal","fullName","icon","faEllipsisV","Image","caption","files","index","src","alt","Post","postref","useRef","profileImg","setProfileImg","setuser","getProfileImg","getUser","useEffect","ruser","effectgetUser","result","displayImg","getimg","ref","Timeline","setShow","title","getTimeline","loading","hasMore","pageNumber","setPageNumber","recievedPosts","addRecivedToTimeline","searchToggle","setSearchToggle","observer","lastPostRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prePage","observe","path","ROUTES","onError","e","DEFAULT_IMAGE_PATH","faArrowLeft","faSearch","length"],"mappings":"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","file":"static/js/7.fe68eae1.chunk.js","sourcesContent":["import Loader from 'react-loader-spinner';\n\nexport default function ReactLoader() {\n  return (\n\n    <Loader\n      type=\"TailSpin\"\n      color=\"#00000059\"\n      height={70}\n      width={70}\n      className=\"flex justify-center mt-12\"\n    />\n  );\n}\n","import React from 'react';\n\n/**\n * @internal\n */\nconst SkeletonThemeContext = React.createContext({});\n\nfunction SkeletonTheme({ children, ...styleOptions }) {\n    return (React.createElement(SkeletonThemeContext.Provider, { value: styleOptions }, children));\n}\n\n/* eslint-disable react/no-array-index-key */\nconst defaultEnableAnimation = true;\n// For performance & cleanliness, don't add any inline styles unless we have to\nfunction styleOptionsToCssProperties({ baseColor, highlightColor, width, height, borderRadius, circle, direction, duration, enableAnimation = defaultEnableAnimation, }) {\n    const style = {};\n    if (direction === 'rtl')\n        style['--animation-direction'] = 'reverse';\n    if (typeof duration === 'number')\n        style['--animation-duration'] = `${duration}s`;\n    if (!enableAnimation)\n        style['--pseudo-element-display'] = 'none';\n    if (typeof width === 'string' || typeof width === 'number')\n        style.width = width;\n    if (typeof height === 'string' || typeof height === 'number')\n        style.height = height;\n    if (typeof borderRadius === 'string' || typeof borderRadius === 'number')\n        style.borderRadius = borderRadius;\n    if (circle)\n        style.borderRadius = '50%';\n    if (typeof baseColor !== 'undefined')\n        style['--base-color'] = baseColor;\n    if (typeof highlightColor !== 'undefined')\n        style['--highlight-color'] = highlightColor;\n    return style;\n}\nfunction Skeleton({ count = 1, wrapper: Wrapper, className: customClassName, containerClassName, containerTestId, circle = false, style: styleProp, ...propsStyleOptions }) {\n    var _a, _b;\n    const contextStyleOptions = React.useContext(SkeletonThemeContext);\n    // Props take priority over context\n    const styleOptions = {\n        ...contextStyleOptions,\n        ...propsStyleOptions,\n        circle,\n    };\n    // `styleProp` has the least priority out of everything\n    const style = {\n        ...styleProp,\n        ...styleOptionsToCssProperties(styleOptions),\n    };\n    let className = 'react-loading-skeleton';\n    if (customClassName)\n        className += ` ${customClassName}`;\n    const inline = (_a = styleOptions.inline) !== null && _a !== void 0 ? _a : false;\n    const elements = [];\n    // Without the <br />, the skeleton lines will all run together if\n    // `width` is specified\n    for (let i = 0; i < count; i++) {\n        const skeletonSpan = (React.createElement(\"span\", { className: className, style: style, key: i }, \"\\u200C\"));\n        if (inline) {\n            elements.push(skeletonSpan);\n        }\n        else {\n            elements.push(React.createElement(React.Fragment, { key: i },\n                skeletonSpan,\n                React.createElement(\"br\", null)));\n        }\n    }\n    return (React.createElement(\"span\", { className: containerClassName, \"data-testid\": containerTestId, \"aria-live\": \"polite\", \"aria-busy\": (_b = styleOptions.enableAnimation) !== null && _b !== void 0 ? _b : defaultEnableAnimation }, Wrapper\n        ? elements.map((el, i) => React.createElement(Wrapper, { key: i }, el))\n        : elements));\n}\n\nexport { SkeletonTheme, Skeleton as default };\n","import React from 'react'\r\nimport ReactDom from 'react-dom'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { deletePostById } from '../../services/postServices'\r\nimport { deleteImgInStorage } from '../../services/resizeService'\r\nimport { usePost } from '../../context/postProvider'\r\nimport { useUser } from '../../context/userProvider'\r\n\r\nexport default function PostModal({ open, content, onClose }) {\r\n    const { user: loggedInUser } = useUser()\r\n    // const { posts, setPosts, userPost, setuserPost } = useContext(TimeLineContext)\r\n    const { timeline, setTimeline } = usePost()\r\n    const { pathname } = useLocation()\r\n    if (!open) return null\r\n\r\n    const unfollow = async () => {\r\n        // try {\r\n        //     await toggleFollow(true, content.author, user._id)\r\n        //     window.location = `/user/${user.username}`\r\n        // } catch (error) {\r\n        //     console.log(error);\r\n        // }\r\n    }\r\n\r\n    const notLikedPost = () => {\r\n        localStorage.setItem(\"dontLikePost\", JSON.stringify({ postId: content._id, author: content.author }))\r\n        // setPosts(posts.filter(item => item._id != content._id))\r\n        onClose()\r\n    }\r\n    const deletePost = async () => {\r\n\r\n        try {\r\n            for (let i = 0; i < content.fileNumber; i++) {\r\n                deleteImgInStorage(`/file/${content?.author}/${content._id}/${content?.fileNames[i]}`)\r\n            }\r\n            await deletePostById(content._id)\r\n\r\n            if (pathname == \"/home\") {\r\n                setTimeline(timeline.filter(item => item._id != content._id))\r\n                onClose()\r\n            }\r\n            else {\r\n                // setuserPost(userPost.filter(item => item._id != content._id))\r\n            }\r\n        }\r\n        catch (e) {\r\n            alert(\"Error while deleting the Post, generally check your internet\");\r\n            console.log(e, content);\r\n            if (pathname == \"/\") {\r\n                setTimeline(prevPost => [...prevPost, content])\r\n                // window.location = pathname\r\n            }\r\n            else {\r\n                // setuserPost(prevPost => [...prevPost, content])\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return ReactDom.createPortal(\r\n        <>\r\n            <div className=\"modal-layout\" onClick={onClose}></div>\r\n            <div className=\"modal-box\">\r\n                <ul className=\"modal-box__list\">\r\n                    <li className=\"modal-box__item\"><Link className=\"u-text-decor-none\" target=\"_blanck\" to={`/user/${content?.author}`} >Share</Link></li>\r\n                    {/* {content.author != user.username && <li className=\"modal-box__item u-text-red-bold\" onClick={unfollow} >Unfollow</li>} */}\r\n                    {content.author == loggedInUser.username && < li className=\"modal-box__item u-text-red-bold\" onClick={deletePost} >Delete Post</li>}\r\n                    {content.author != loggedInUser.username && <li className=\"modal-box__item u-text-red-bold\" onClick={notLikedPost} >I don't link this Post</li>}\r\n                    <li className=\"modal-box__item\" onClick={onClose}>Cancel</li>\r\n                </ul>\r\n            </div>\r\n        </>,\r\n        document.getElementById(\"modal\")\r\n    )\r\n}\r\n","/* eslint-disable jsx-a11y/img-redundant-alt */\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\n// import { deletePostById } from '../../services/postServices';\nimport PostModal from './postModal';\n\nexport default function Header({ user, content, setProfile, photosCollection }) {\n  const [isModal, setModal] = useState(false)\n  return (\n    <div className=\"post__header\">\n\n      <Link to={`/user/${user?.username}`} className=\"post__header-info\">\n        <div className=\"u-bold post__header-name\">{user?.fullName}</div>\n        <p className=\"post__header-username\">@{user?.username}</p>\n      </Link>\n      <div className=\"u-icon\" onClick={() => setModal(true)}><FontAwesomeIcon icon={faEllipsisV} /></div>\n      {isModal && <PostModal content={content} open={isModal} onClose={() => setModal(false)} />}\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { faArrowLeft, faArrowRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport BlankPost from './blankPost';\n\nexport default function Image({ fileNumber, caption, postId, files, author }) {\n  const [counter, setCounter] = useState(0)\n  const [loading, setLoading] = useState(false)\n\n  const increase = () => {\n    if (counter === fileNumber - 1) return null\n    setCounter(counter + 1)\n  }\n  const decrease = () => {\n    if (counter === 0) return null\n    setCounter(counter - 1)\n  }\n  return (\n    <div className=\"image-slider\">\n      <div className=\"image-slider__box\">\n        <div className={`${fileNumber == 2 || fileNumber == 3 || fileNumber == 4 ? `image-slider__box-left-${fileNumber}` : \"image-slider__box-left\"}`}>\n          {files.map((item, index) => (<>\n            {index < 2 ? <Link to={`/${author}/${postId}/${index + 1}`} className={`${fileNumber == 2 || fileNumber == 4 || fileNumber == 3 ? `image-slider__box-img-${fileNumber}` : \"image-slider__box-img\"}`}>\n              <img\n                // className={`${fileNumber == 2 || fileNumber == 4 || fileNumber == 3 ? `image-slider__box-img-${fileNumber}` : \"image-slider__box-img\"}`} \n                className=\"image-slider__box-img-nor\"\n                src={item} alt=\"files\" />\n            </Link> : <></>}\n          </>)\n          )}\n        </div>\n\n        {fileNumber > 2 ? <div className={`${fileNumber == 4 ? \"image-slider__box-right-2\" : \"image-slider__box-right-3\"}`}>\n          {files.map((item, index) => (<>\n            {index > 1 ? <Link to={`/${author}/${postId}/${index + 1}`}><img className={`${fileNumber == 4 ? `image-slider__box-img-${fileNumber}` : \"image-slider__box-img-r3\"}`} src={item} alt=\"files\" /></Link> : <></>}\n\n          </>)\n          )}\n        </div> : <></>}\n        {/* {files.length ? <Link to={`/${author}/${postId}/${counter + 1}`}><img className=\"image-slider__box-img\" src={files[counter]} alt={caption} /></Link> : <></>}\n        {loading && <BlankPost width=\"100%\" height=\"95%\" counter={counter} />}\n        <>\n          {counter < (fileNumber - 1) &&\n            (\n              <button className=\"image-slider__btn image-slider__btn-inc\" onClick={increase}>\n                <FontAwesomeIcon icon={faArrowRight} />\n              </button>\n            )\n          }</>\n        {counter !== 0 && <button className=\"image-slider__btn image-slider__btn-dec\" onClick={decrease}>\n          <FontAwesomeIcon icon={faArrowLeft} />\n        </button>} */}\n      </div>\n\n    </div>\n  );\n}\n\n","import { useEffect, useRef, useState } from 'react';\nimport Header from './header';\nimport Image from './image';\nimport { Link } from 'react-router-dom';\nimport Footer from './footer';\nimport { useUser } from '../../context/userProvider';\n\n\nexport default function Post({ content, postref, setProfile, photosCollection }) {\n  const commentInput = useRef(null);\n  const [profileImg, setProfileImg] = useState()\n  const [user, setuser] = useState()\n  const { getProfileImg, getUser } = useUser()\n  const { caption, author, fileNumber, _id, files } = content\n\n  useEffect(() => {\n    async function effectgetUser() {\n      const ruser = await getUser(author)\n      setuser(ruser)\n    }\n    effectgetUser()\n  }, [author])\n\n  useEffect(() => {\n    async function getimg() {\n      const result = await getProfileImg(author)\n      setProfileImg(result?.displayImg.profileImg)\n    }\n    getimg()\n\n  }, [content])\n\n  // const handlePay = () => {\n  //   setPayModel(true)\n  // }\n\n  // const result = caption.charCodeAt(0)\n  // console.log(caption, result);\n  // components\n  // -> header, image, actions (like & comment icons), footer, \n  return (\n    <div ref={postref} className=\"post\">\n      <Link to={`/user/${user?.username}`} className=\"post__side\" >\n        <img className=\"post__pimg\" src={profileImg} alt=\"profile\" />\n      </Link>\n      <div className=\"post__main\">\n        <Header content={content} user={user} setProfile={setProfile} photosCollection={photosCollection} />\n        <div className=\"post__text\">\n          {caption}\n        </div>\n        <Image files={files} author={author} fileNumber={fileNumber} postId={_id} />\n      </div>\n    </div>\n  );\n}\n\n","import { faArrowLeft, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Switch, } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport Skeleton from 'react-loading-skeleton';\nimport SearchBar from './leftbar/searchBar';\nimport Post from './post';\nimport * as ROUTES from '../constants/routes';\nimport ReactLoader from './loader';\nimport { DEFAULT_IMAGE_PATH } from '../constants/paths';\nimport { usePost } from '../context/postProvider';\nimport { useUser } from '../context/userProvider';\nimport ProtectedRoute from '../helpers/protected-route';\nimport FullImg from './post/fullImg';\n\nexport default function Timeline({ setShow, user }) {\n  useEffect(() => {\n    document.title = 'Home | Touch';\n  }, []);\n  const { user: loggedInUser } = useUser()\n  const { getTimeline, timeline, loading, hasMore, pageNumber, setPageNumber, recievedPosts, addRecivedToTimeline } = usePost()\n  const [searchToggle, setSearchToggle] = useState(false)\n  // const [show, setShow] = useState(false) \n\n  useEffect(async () => {\n    console.log(\"in effect\");\n    await getTimeline()\n  }, [pageNumber])\n\n  const observer = useRef()\n  const lastPostRef = useCallback(node => {\n    if (loading) return\n    if (observer.current) observer.current.disconnect()\n    observer.current = new IntersectionObserver(entries => {\n      console.log(hasMore);\n      if (entries[0].isIntersecting && hasMore) {\n        setPageNumber(prePage => prePage + 1)\n      }\n    })\n    if (node) observer.current.observe(node)\n  }, [loading, hasMore])\n\n  return (\n    <>\n      <Switch>\n        <ProtectedRoute path={ROUTES.FULLIMG} user={user}  >\n          <FullImg user={user} />\n        </ProtectedRoute>\n      </Switch>\n      <div className=\"timeline\">\n\n        <div className=\"timeline__head\">\n          <div className=\"timeline__head--profile\" onClick={() => setShow(true)}>\n            <img className=\"link-list--proImg--small\" src={loggedInUser?.displayImg?.profileImg} onError={(e) => {\n              e.target.src = DEFAULT_IMAGE_PATH;\n            }} alt={loggedInUser?.username} />\n          </div>\n          {!searchToggle && <h3 className=\"heading-main\">Home</h3>}\n          {searchToggle && <div className=\"timeline__head--search\">\n            <FontAwesomeIcon icon={faArrowLeft} onClick={() => { setSearchToggle(false) }} />\n            <SearchBar />\n          </div>}\n          <div className=\"timeline__head--searchbtn\">\n            <FontAwesomeIcon icon={faSearch} onClick={() => setSearchToggle(true)} />\n          </div>\n        </div>\n\n        {recievedPosts.length ? (<div className=\"timeline__unseen\" onClick={addRecivedToTimeline}>\n          {recievedPosts.length} New Posts\n        </div>) : (<></>)}\n\n        {!timeline?.length && loading ? (\n          <Skeleton count={2} width={640} height={500} />\n        ) : (\n          timeline?.map((content, index) => {\n            if (timeline?.length === index + 1) {\n              return <Post key={index} postref={lastPostRef} key={content?._id} content={content} />\n            }\n            else {\n              return <Post key={index} content={content} />\n            }\n          })\n        )}\n        <div className=\"timeline__loading\">{loading && (\n          <ReactLoader />\n        )}</div>\n        {/* <div>{error && 'Error'}</div> */}\n      </div>\n    </>\n  );\n}\n"],"sourceRoot":""}