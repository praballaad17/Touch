(this["webpackJsonpclient-new"]=this["webpackJsonpclient-new"]||[]).push([[10],{117:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return f}));var a,r=n(1),c=n.n(r),o=n(9),s=n(5),u=n(13),i=n.n(u),l=n(31),p=(n(48),l.a+"/auth"),d="token";a=localStorage.getItem(d),i.a.defaults.headers.common.token=a;var b=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t&&n?{data:{usernameOrEmail:t,password:n}}:{headers:{authorization:a}},e.next=4,i()("".concat(p,"/login"),Object(o.a)({method:"POST"},r));case 4:return s=e.sent,localStorage.setItem(d,s.data.token),e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a,r){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat(p,"/register"),{email:a,fullName:n,username:t,password:r});case 3:return o=e.sent,console.log(o.data.token),localStorage.setItem(d,o.data.token),e.abrupt("return",o.data);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a,r){return e.apply(this,arguments)}}();function f(){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(d);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},157:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(1),r=n.n(a),c=n(5),o=n(6),s=n(0),u=n(14),i=n(54),l=n(42),p=n(117),d=n(7);function b(e){var t=e.user,n=(Object(u.h)(),Object(s.useState)("")),a=Object(o.a)(n,2),b=a[0],h=a[1],f=Object(s.useState)(""),j=Object(o.a)(f,2),m=j[0],v=j[1],O=Object(s.useState)(""),x=Object(o.a)(O,2),g=x[0],w=x[1],_=""===m||""===b,N=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Object(p.a)(b,m);case 4:window.location="/",e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),h(""),v(""),w(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){document.title="Login - Touch"}),[]),t?Object(d.jsx)(u.a,{to:l.j}):Object(d.jsx)("div",{className:"login",children:Object(d.jsxs)("div",{className:"login__box",children:[Object(d.jsxs)("div",{className:"login__box--sub",children:[Object(d.jsx)("h1",{className:"login__box--head",children:"Touch"}),g&&Object(d.jsx)("p",{className:"login__box--error",children:g}),Object(d.jsxs)("form",{className:"login__form",onSubmit:N,method:"POST",children:[Object(d.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"login__form--input",onChange:function(e){var t=e.target;return h(t.value)},value:b}),Object(d.jsx)("input",{"aria-label":"Enter your password",type:"password",placeholder:"Password",className:"login__form--input",onChange:function(e){var t=e.target;return v(t.value)},value:m}),Object(d.jsx)("button",{disabled:_,type:"submit",className:"btn btn-login\n            ".concat(_&&"u-opacity-50"),children:"Login"})]})]}),Object(d.jsx)("div",{className:"login__box--foot",children:Object(d.jsxs)("p",{className:"login__box--foot--content",children:["Don't have an account?"," ",Object(d.jsx)(i.b,{to:l.i,className:"u-text-blue",children:"Sign up"})]})})]})})}}}]);
//# sourceMappingURL=10.fbd038af.chunk.js.map